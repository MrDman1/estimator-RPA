<Window x:Class="Nuform.App.Views.CalculationsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Calculations" Width="900" Height="640">
  <ScrollViewer Padding="16">
    <StackPanel>
      <TextBlock Text="Algebraic Calculations" FontSize="20" FontWeight="Bold" Margin="0,0,0,12"/>
      <ItemsControl ItemsSource="{Binding FormulaRows}">
        <ItemsControl.ItemTemplate>
          <DataTemplate>
            <StackPanel Margin="0,0,0,12">
              <TextBlock Text="{Binding Title}" FontWeight="SemiBold"/>
              <DockPanel Margin="0,4,0,0">
                <!-- Variable editor -->
                <ItemsControl ItemsSource="{Binding Variables}">
                  <ItemsControl.ItemTemplate>
                    <DataTemplate>
                      <StackPanel Orientation="Horizontal" Margin="0,0,8,0">
                        <TextBlock Text="{Binding Name}" Margin="0,0,6,0"/>
                        <TextBox Width="80"
                                 Text="{Binding Value, UpdateSourceTrigger=PropertyChanged}"/>
                      </StackPanel>
                    </DataTemplate>
                  </ItemsControl.ItemTemplate>
                </ItemsControl>
              </DockPanel>
              <TextBlock Text="{Binding Expression}" />
              <TextBlock Text="{Binding Evaluated}" FontWeight="SemiBold" />
            </StackPanel>
          </DataTemplate>
        </ItemsControl.ItemTemplate>
      </ItemsControl>
    </StackPanel>
  </ScrollViewer>
</Window>
